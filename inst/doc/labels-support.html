<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h2>Introduction</h2>

<p>Variable label is human readable description of the variable. R supports rather long variable names and these names can contain even spaces and punctuation but short variables names make coding easier. Variable label can give a nice, long description of variable. With this description it is easier to remember what those variable names refer to.
Value labels are similar to variable labels, but value labels are descriptions of the values a variable can take. Labeling values means we don’t have to remember if 1=Extremely poor and 7=Excellent or vice-versa. We can easily get dataset description and variables summary with <code>info</code> function.</p>

<p>The usual way to connect numeric data to labels in R is in factor variables. However, factors miss important features which the value labels provide. Factors only allow for integers to be mapped to a text label, these integers have to be a count starting at 1 and every value need to be labelled. Also, we can’t calculate means or other numeric statistics on factors. </p>

<p>With labels we can manipulate short variable names and codes when we analyze our data but in the resulting tables and graphs we will see human-readable text. </p>

<p>It is easy to store labels as variable attributes in R but most R functions cannot use them or even drop them. <code>expss</code> package integrates value labels support into base R functions and into functions from other packages. Every function which internally converts variable to factor will utilize labels. Labels will be preserved during variables subsetting and concatenation. Additionally, there is a function (<code>use_labels</code>) which greatly simplify variable labels usage. See examples below.</p>

<h2>Getting and setting variable and value labels</h2>

<p>First, apply value and variables labels to dataset:</p>

<pre><code class="r">library(expss)
data(mtcars)
mtcars = apply_labels(mtcars,
                      mpg = &quot;Miles/(US) gallon&quot;,
                      cyl = &quot;Number of cylinders&quot;,
                      disp = &quot;Displacement (cu.in.)&quot;,
                      hp = &quot;Gross horsepower&quot;,
                      drat = &quot;Rear axle ratio&quot;,
                      wt = &quot;Weight (1000 lbs)&quot;,
                      qsec = &quot;1/4 mile time&quot;,
                      vs = &quot;Engine&quot;,
                      vs = c(&quot;V-engine&quot; = 0,
                             &quot;Straight engine&quot; = 1),
                      am = &quot;Transmission&quot;,
                      am = c(&quot;Automatic&quot; = 0,
                             &quot;Manual&quot;=1),
                      gear = &quot;Number of forward gears&quot;,
                      carb = &quot;Number of carburetors&quot;
)
</code></pre>

<p>In addition to <code>apply_labels</code> we have SPSS-style <code>var_lab</code> and <code>val_lab</code> functions:</p>

<pre><code class="r">nps = c(-1, 0, 1, 1, 0, 1, 1, -1)
var_lab(nps) = &quot;Net promoter score&quot;
val_lab(nps) = num_lab(&quot;
            -1 Detractors
             0 Neutralists    
             1 Promoters    
&quot;)
</code></pre>

<p>We can read, add or remove existing labels:</p>

<pre><code class="r">var_lab(nps) # get variable label
</code></pre>

<pre><code>## [1] &quot;Net promoter score&quot;
</code></pre>

<pre><code class="r">val_lab(nps) # get value labels
</code></pre>

<pre><code>##  Detractors Neutralists   Promoters 
##          -1           0           1
</code></pre>

<pre><code class="r"># add new labels
add_val_lab(nps) = num_lab(&quot;
                           98 Other    
                           99 Hard to say
                           &quot;)

# remove label by value
# %d% - diff, %n_d% - names diff 
val_lab(nps) = val_lab(nps) %d% 98
# or, remove value by name
val_lab(nps) = val_lab(nps) %n_d% &quot;Other&quot;
</code></pre>

<p>Additionaly, there are some utility functions. They can applied on one variable as well as on the entire dataset.</p>

<pre><code class="r">drop_val_labs(nps)
</code></pre>

<pre><code>## LABEL: Net promoter score 
## VALUES:
## -1, 0, 1, 1, 0, 1, 1, -1
</code></pre>

<pre><code class="r">drop_var_labs(nps)
</code></pre>

<pre><code>## VALUES:
## -1, 0, 1, 1, 0, 1, 1, -1
## VALUE LABELS:               
##  -1 Detractors 
##   0 Neutralists
##   1 Promoters  
##  99 Hard to say
</code></pre>

<pre><code class="r">unlab(nps)
</code></pre>

<pre><code>## [1] -1  0  1  1  0  1  1 -1
</code></pre>

<pre><code class="r">drop_unused_labels(nps)
</code></pre>

<pre><code>## LABEL: Net promoter score 
## VALUES:
## -1, 0, 1, 1, 0, 1, 1, -1
## VALUE LABELS:               
##  -1 Detractors 
##   0 Neutralists
##   1 Promoters
</code></pre>

<pre><code class="r">prepend_values(nps)
</code></pre>

<pre><code>## LABEL: Net promoter score 
## VALUES:
## -1, 0, 1, 1, 0, 1, 1, -1
## VALUE LABELS:                  
##  -1 -1 Detractors 
##   0 0 Neutralists 
##   1 1 Promoters   
##  99 99 Hard to say
</code></pre>

<p>There is also <code>prepend_names</code> function but it can be applied only to data.frame.</p>

<h2>Labels with base R and ggplot2 functions</h2>

<p>Base <code>table</code> and plotting with value labels:</p>

<pre><code class="r">with(mtcars, table(am, vs))
</code></pre>

<pre><code>##            vs
## am          V-engine Straight engine
##   Automatic       12               7
##   Manual           6               7
</code></pre>

<pre><code class="r">with(mtcars, 
     barplot(
         table(am, vs), 
         beside = TRUE, 
         legend = TRUE)
     )
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-5"/></p>

<pre><code class="r">boxplot(mpg ~ am, data = mtcars)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-5"/></p>

<p>There is a special function for variables labels support - <code>use_labels</code>. By now variables labels support available only for expression which will be evaluated inside data.frame.</p>

<pre><code class="r"># table with dimension names
use_labels(mtcars, table(am, vs)) 
</code></pre>

<pre><code>##             Engine
## Transmission V-engine Straight engine
##    Automatic       12               7
##    Manual           6               7
</code></pre>

<pre><code class="r"># linear regression
use_labels(mtcars, lm(mpg ~ wt + hp + qsec)) %&gt;% summary
</code></pre>

<pre><code>## 
## Call:
## lm(formula = `Miles/(US) gallon` ~ `Weight (1000 lbs)` + `Gross horsepower` + 
##     `1/4 mile time`)
## 
## Residuals:
## LABEL: Miles/(US) gallon 
## VALUES:
## -3.8591, -1.6418, -0.4636, 1.194, 5.6092
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)         27.61053    8.41993   3.279  0.00278 ** 
## `Weight (1000 lbs)` -4.35880    0.75270  -5.791 3.22e-06 ***
## `Gross horsepower`  -0.01782    0.01498  -1.190  0.24418    
## `1/4 mile time`      0.51083    0.43922   1.163  0.25463    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.578 on 28 degrees of freedom
## Multiple R-squared:  0.8348, Adjusted R-squared:  0.8171 
## F-statistic: 47.15 on 3 and 28 DF,  p-value: 4.506e-11
</code></pre>

<p>And, finally, <code>ggplot2</code> graphics with variables and value labels:</p>

<pre><code class="r">library(ggplot2, warn.conflicts = FALSE)
</code></pre>

<pre><code>## Registered S3 methods overwritten by &#39;ggplot2&#39;:
##   method         from 
##   [.quosures     rlang
##   c.quosures     rlang
##   print.quosures rlang
</code></pre>

<pre><code class="r">use_labels(mtcars, {
    # &#39;..data&#39; is shortcut for all &#39;mtcars&#39; data.frame inside expression 
    ggplot(..data) +
        geom_point(aes(y = mpg, x = wt, color = qsec)) +
        facet_grid(am ~ vs)
}) 
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-7"/></p>

<h2>Extreme value labels support</h2>

<p>We have an option for extreme values lables support: <code>expss_enable_value_labels_support_extreme()</code>. With this option <code>factor</code>/<code>as.factor</code> will take into account empty levels. However, <code>unique</code> will give weird result for labelled variables: labels without values will be added to unique values. That&#39;s why it is recommended to turn off this option immediately after usage. See examples. </p>

<p>We have label &#39;Hard to say&#39; for which there are no values in <code>nps</code>:</p>

<pre><code class="r">nps = c(-1, 0, 1, 1, 0, 1, 1, -1)
var_lab(nps) = &quot;Net promoter score&quot;
val_lab(nps) = num_lab(&quot;
            -1 Detractors
             0 Neutralists    
             1 Promoters
             99 Hard to say
&quot;)
</code></pre>

<p>Here we disable labels support and get results without labels:</p>

<pre><code class="r">expss_disable_value_labels_support()
table(nps) # there is no labels in the result
</code></pre>

<pre><code>## nps
## -1  0  1 
##  2  2  4
</code></pre>

<pre><code class="r">unique(nps)
</code></pre>

<pre><code>## [1] -1  0  1
</code></pre>

<p>Results with default value labels support - three labels are here but &ldquo;Hard to say&rdquo; is absent.</p>

<pre><code class="r">expss_enable_value_labels_support()
# table with labels but there are no label &quot;Hard to say&quot;
table(nps)
</code></pre>

<pre><code>## nps
##  Detractors Neutralists   Promoters 
##           2           2           4
</code></pre>

<pre><code class="r">unique(nps)
</code></pre>

<pre><code>## LABEL: Net promoter score 
## VALUES:
## -1, 0, 1
## VALUE LABELS:               
##  -1 Detractors 
##   0 Neutralists
##   1 Promoters  
##  99 Hard to say
</code></pre>

<p>And now extreme value labels support - we see &ldquo;Hard to say&rdquo; with zero counts. Note the weird <code>unique</code> result.</p>

<pre><code class="r">expss_enable_value_labels_support_extreme()
# now we see &quot;Hard to say&quot; with zero counts
table(nps) 
</code></pre>

<pre><code>## nps
##  Detractors Neutralists   Promoters Hard to say 
##           2           2           4           0
</code></pre>

<pre><code class="r"># weird &#39;unique&#39;! There is a value 99 which is absent in &#39;nps&#39;
unique(nps) 
</code></pre>

<pre><code>## LABEL: Net promoter score 
## VALUES:
## -1, 0, 1, 99
## VALUE LABELS:               
##  -1 Detractors 
##   0 Neutralists
##   1 Promoters  
##  99 Hard to say
</code></pre>

<p>Return immediately to defaults to avoid issues:</p>

<pre><code class="r">expss_enable_value_labels_support()
</code></pre>

<h2>Labels are preserved during common operations on the data</h2>

<p>There are special methods for subsetting and concatenating labelled variables. These methods preserve labels during common operations. We don&#39;t need to restore labels on subsetted or sorted data.frame. </p>

<p><code>mtcars</code> with labels:</p>

<pre><code class="r">str(mtcars)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    32 obs. of  11 variables:
##  $ mpg :Class &#39;labelled&#39; num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##    .. .. LABEL: Miles/(US) gallon 
##  $ cyl :Class &#39;labelled&#39; num  6 6 4 6 8 6 8 4 4 6 ...
##    .. .. LABEL: Number of cylinders 
##  $ disp:Class &#39;labelled&#39; num  160 160 108 258 360 ...
##    .. .. LABEL: Displacement (cu.in.) 
##  $ hp  :Class &#39;labelled&#39; num  110 110 93 110 175 105 245 62 95 123 ...
##    .. .. LABEL: Gross horsepower 
##  $ drat:Class &#39;labelled&#39; num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##    .. .. LABEL: Rear axle ratio 
##  $ wt  :Class &#39;labelled&#39; num  2.62 2.88 2.32 3.21 3.44 ...
##    .. .. LABEL: Weight (1000 lbs) 
##  $ qsec:Class &#39;labelled&#39; num  16.5 17 18.6 19.4 17 ...
##    .. .. LABEL: 1/4 mile time 
##  $ vs  :Class &#39;labelled&#39; num  0 0 1 1 0 1 0 1 1 1 ...
##    .. .. LABEL: Engine 
##    .. .. VALUE LABELS [1:2]: 0=V-engine, 1=Straight engine 
##  $ am  :Class &#39;labelled&#39; num  1 1 1 0 0 0 0 0 0 0 ...
##    .. .. LABEL: Transmission 
##    .. .. VALUE LABELS [1:2]: 0=Automatic, 1=Manual 
##  $ gear:Class &#39;labelled&#39; num  4 4 4 3 3 3 3 4 4 4 ...
##    .. .. LABEL: Number of forward gears 
##  $ carb:Class &#39;labelled&#39; num  4 4 1 1 2 1 4 2 2 4 ...
##    .. .. LABEL: Number of carburetors
</code></pre>

<p>Make subset of the data.frame:</p>

<pre><code class="r">mtcars_subset = mtcars[1:10, ]
</code></pre>

<p>Labels are here, nothing is lost:</p>

<pre><code class="r">str(mtcars_subset)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    10 obs. of  11 variables:
##  $ mpg :Class &#39;labelled&#39; num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2
##    .. .. LABEL: Miles/(US) gallon 
##  $ cyl :Class &#39;labelled&#39; num  6 6 4 6 8 6 8 4 4 6
##    .. .. LABEL: Number of cylinders 
##  $ disp:Class &#39;labelled&#39; num  160 160 108 258 360 ...
##    .. .. LABEL: Displacement (cu.in.) 
##  $ hp  :Class &#39;labelled&#39; num  110 110 93 110 175 105 245 62 95 123
##    .. .. LABEL: Gross horsepower 
##  $ drat:Class &#39;labelled&#39; num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92
##    .. .. LABEL: Rear axle ratio 
##  $ wt  :Class &#39;labelled&#39; num  2.62 2.88 2.32 3.21 3.44 ...
##    .. .. LABEL: Weight (1000 lbs) 
##  $ qsec:Class &#39;labelled&#39; num  16.5 17 18.6 19.4 17 ...
##    .. .. LABEL: 1/4 mile time 
##  $ vs  :Class &#39;labelled&#39; num  0 0 1 1 0 1 0 1 1 1
##    .. .. LABEL: Engine 
##    .. .. VALUE LABELS [1:2]: 0=V-engine, 1=Straight engine 
##  $ am  :Class &#39;labelled&#39; num  1 1 1 0 0 0 0 0 0 0
##    .. .. LABEL: Transmission 
##    .. .. VALUE LABELS [1:2]: 0=Automatic, 1=Manual 
##  $ gear:Class &#39;labelled&#39; num  4 4 4 3 3 3 3 4 4 4
##    .. .. LABEL: Number of forward gears 
##  $ carb:Class &#39;labelled&#39; num  4 4 1 1 2 1 4 2 2 4
##    .. .. LABEL: Number of carburetors
</code></pre>

<h2>Interaction with &#39;haven&#39;</h2>

<p>To use <code>expss</code> with <code>haven</code> you need to load <code>expss</code> strictly after <code>haven</code> (or other package with implemented &#39;labelled&#39; class) to avoid conflicts. And it is better to use <code>read_spss</code> with explict package specification: <code>haven::read_spss</code>. See example below. 
<code>haven</code> package doesn&#39;t set &#39;labelled&#39; class for variables which have variable label but don&#39;t have value labels. It leads to labels losing during subsetting and other operations. We have a special function to fix this: <code>add_labelled_class</code>. Apply it to dataset loaded by <code>haven</code>.</p>

<pre><code class="r"># we need to load packages strictly in this order to avoid conflicts
library(haven)
library(expss)
spss_data = haven::read_spss(&quot;spss_file.sav&quot;)
# add missing &#39;labelled&#39; class
spss_data = add_labelled_class(spss_data) 
</code></pre>

</body>

</html>
